<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="jquery-1.11.2.js"></script>
	<script src="video.js"></script>
</head>
<body >
	<p>Enter Youtube URL: <input type="text" name="url" id="url" ></p>
	<input type="button" id="but" value="submit">

	<div class="table-responsive">
		<table class="table table-hover">
			<thead>
				<tr>
					<th>ID</th>
					<th>TITLE</th>
					<th>DESCRIPTION</th>
					<th>URL</th>
				</tr>
			</thead>
			<tbody>
				
			</tbody>

		</table>
	</div>

	<div id="jsondata">
	</div>


	<script type="text/javascript">
	jQuery(document).ready(function() {
		$("#but").click(function() {

			var url = $("#url").val();
			//var str = texting.text();

			getJSONdata(url);

			//prependbody(texting);

					});
	});

	//what needs to be done: for post -  accept user url input, send that input to function whereby $.$.getJSON responds with the api info. extract the video id, title, description, url... 

	//send that information in json format to an external file. 

	//on load of the page any videos in the json file are read on to the page and put into a list//table under the correct columns
	//});

	//method to load the json file data
	function onload()
	{
		var xmlhttp = new XMLHttpRequest();
		var urli = "data.json";

		xmlhttp.onreadystatechange = function()
		{
		    if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
		    {
		        readJson(xmlhttp.responseText);
	    	}
		}

		xmlhttp.open("GET", urli, true);
		xmlhttp.send(null);
	}

	//method for the output of json file data
	function readJson(jsontext)
	{
		var jarray = $.parseJSON(jsontext);
		var i = 0;

		var html = "table";

		for (i; i < jarray.length; i++) {
			html += "<tr><td>"+
			jarray[i].id+"</td><td>"+
			jarray[i].title+"</td><td>"+
			jarray[i].description+"</td><tr>";
		}

		html +="</table>"
		document.getelementbyId("jsondata").innerhtml = html;
	}

	function getJSONdata(urlstring)
	{
		var id = "";
		var title = "";
		var description = "";

		$.getJSON(urlstring, function(response) {
				id = response.data.id;
				title = response.data.title;
				description = response.data.description;

				alert(id);
		});

		var inputData = {
					"id" : id,
					"title" : title,
					"description" : description,
					"url" : urlstring
				}

		writeJson(inputData);
	}

	//this function is to accept the Youtube response data and write it to our json file.
	function writeJson(ytdata)
	{
		//here i find infile = /file.json in js. to write to file in json. possibly use writeJson();

		//$.writeJson("")

		$.post('data.json', param1: 'value1', function(data, textStatus, xhr) {
			/*optional stuff to do after success */
		});
	}

	</script>

</body>

</html>